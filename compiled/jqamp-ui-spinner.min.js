/*
* jqAmp UI Spinner v1.0 (for jQuery/jQuery UI)
*
* Copyright 2012, Tony Kramer
* Dual licensed under the MIT or GPL Version 2 licenses.
* https://github.com/flamewave/jqamp-ui-spinner/raw/master/GPL-LICENSE.txt
* https://github.com/flamewave/jqamp-ui-spinner/raw/master/MIT-LICENSE.txt
*/
(function(a){var b=["ui-icon-triangle-1-n","ui-icon-triangle-1-s"];a.widget("jqAmpUI.spinner",{version:"1.0",options:{disabled:false,readonly:false,keyboard:{allowed:null,upDownArrows:{defaultAction:"step",ctrlAction:"halfStep",shiftAction:"page"},pageUpDown:true},mousewheel:{defaultAction:"step",ctrlAction:"halfStep",shiftAction:"page"},buttons:{position:"inside",up:{icon:b[0],title:null},down:{icon:b[1],title:null},defaultAction:"step",ctrlAction:"halfStep",shiftAction:"page"},incremental:true,delay:500,format:null,parse:null,compare:null,min:false,max:false,empty:false,step:1,halfStep:0.5,page:10},uiSpinner:null,document:null,window:null,_timeout:null,_interval:null,_spinCount:0,_isSpinning:false,_previous:undefined,_kbEvents:false,_mwEvents:false,_buttons:false,_create:function(){var d=this.element,f,e=this.options,c=this;this.document=a(d.style?d.ownerDocument:d.document||d);this.window=this.document[0].defaultView||this.document[0].parentWindow;this._setValue(this._parse(d.val()),false,false);a.each(["min","max","step"],function(g,h){var j=d.attr(h);if(j!==undefined&&j.length&&!e[h]){e[h]=c._parse(j)}});this.uiSpinner=f=d.addClass("ui-spinner-input ui-corner-all").attr({autocomplete:"off",role:"spinbutton","aria-valuemin":this._format(this._minVal()),"aria-valuemax":this._format(this._maxVal()),"aria-valuenow":this.value()}).wrap(this._uiSpinnerHtml()).bind({"focus.spinner":function(){f.addClass("ui-state-active");c._previous=c.value()},"blur.spinner":function(g){var h=c.value();f.removeClass("ui-state-active");d.attr("aria-valuenow",h);if(c._compare(c._previous,h)!==0){c._trigger("change",g)}c._previous=undefined}}).parent();this.uiSpinner.bind({"mouseenter.spinner":function(g){f.addClass("ui-state-hover")},"mouseleave.spinner":function(g){f.removeClass("ui-state-hover")}});if(e.buttons){this._setupButtons()}if(e.keyboard){this._setupKeyboard()}if(e.mousewheel){this._setupMouseWheel()}if(e.disabled||d._prop("disabled")){this._setOption("disabled",true)}if(e.readonly||d._prop("readonly")){this._setOption("readonly",true)}a(this.window).bind("beforeunload.spinner",function(){d.removeAttr("autocomplete")})},_uiSpinnerHtml:function(){return'<span class="ui-widget ui-spinner ui-spinner-nobuttons" />'},destroy:function(){a(this.window).unbind("beforeunload.spinner");this.element.siblings(".ui-spinner-button").remove();this.element.unbind(".spinner").unwrap().removeClass("ui-spinner-input").removeAttr("disabled autocomplete role aria-valuemin aria-valuemax aria-valuenow");a.Widget.prototype.destroy.call(this)},_setupButtons:function(){if(this._buttons){return}var d=this.options.buttons,c=this,h=false,g=true;if(!d){return}if(d.position){if(d.position==="insideStacked"||d.position==="outsideStacked"){h=true}if(d.position==="outside"||d.position==="outsideStacked"){g=false}}if(g){this.uiSpinner.addClass("ui-widget-content ui-corner-all ui-spinner-inside").children(".ui-spinner-input").removeClass("ui-corner-all")}else{this.uiSpinner.addClass("ui-spinner-outside").removeClass("ui-widget-content ui-corner-all").children(".ui-spinner-input").addClass("ui-corner-all")}this.uiSpinner.removeClass("ui-spinner-nobuttons").addClass(h?"ui-spinner-stacked":"ui-spinner-adjacent");var f=this.element[0],e=this.document;this.uiSpinner.append(this._buttonHtml(h,g)).children(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all").bind({"mousedown.spinner":function(i){i.preventDefault();if(e.activeElement!==f){f.focus()}if(c.options.disabled||c.options.readonly){return}if(!c._start(i)){return}c._spin(c._getAmount(d,i.ctrlKey,i.shiftKey),a(i.currentTarget).hasClass("ui-spinner-down"),true,i)},"mouseup.spinner":function(i){c._stop(i)}});if(d&&d.up&&d.up.title){this.uiSpinner.children(".ui-spinner-up").attr("title",d.up.title)}if(d&&d.down&&d.down.title){this.uiSpinner.children(".ui-spinner-down").attr("title",d.down.title)}this._buttons=true},_removeButtons:function(){if(!this._buttons){return}this.uiSpinner.removeClass("ui-spinner-inside ui-spinner-outside ui-spinner-stacked ui-spinner-adjacent ui-widget-content ui-corner-all").addClass("ui-spinner-nobuttons").children(".ui-spinner-input").addClass("ui-corner-all").end().children(".ui-spinner-button").remove();this._buttons=false},_buttonHtml:function(g,f){var d=this.options.buttons,h,e;if(g){h=f?" ui-corner-tr":" ui-corner-top";e=f?"ui-corner-br":"ui-corner-bottom"}else{h=f?"":" ui-corner-left";e="ui-corner-right"}function c(j,i){if(!d||!d[j]||!d[j].icon||typeof d[j].icon!=="string"){return b[i]}return d[j].icon}return'<a class="ui-spinner-button ui-spinner-up'+h+'"><span class="ui-icon '+c("up",0)+'">&#9650;</span></a><a class="ui-spinner-button ui-spinner-down '+e+'"><span class="ui-icon '+c("down",1)+'">&#9660;</span></a>'},_setupKeyboard:function(){var c=this,f=this.options,d=f.keyboard,e=a.ui.keyCode;if(this._kbEvents||!d){return}this.element.bind({"keydown.spinner":function(g){if(f.disabled||f.readonly||!d){return}switch(g.which){case e.UP:if(d===true||d.upDownArrows){if(c._start(g)){c._spin(c._getAmount(d.upDownArrows,g.ctrlKey,g.shiftKey),false,false,g)}g.preventDefault();return}break;case e.DOWN:if(d===true||d.upDownArrows){if(c._start(g)){c._spin(c._getAmount(d.upDownArrows,g.ctrlKey,g.shiftKey),true,false,g)}g.preventDefault();return}break;case e.PAGE_UP:if(d===true||d.pageUpDown){if(c._start(g)){c._spin(c._getPage(),false,false,g)}g.preventDefault();return}break;case e.PAGE_DOWN:if(d===true||d.pageUpDown){if(c._start(g)){c._spin(c._getPage(),true,false,g)}g.preventDefault();return}break}if(d===true||!d.allowed||c._isAllowedKey(g.which,g)){return}if(a.isFunction(d.allowed)&&d.allowed.apply(c,[g.which,g])){return}else{if(a.isArray(d.allowed)&&d.allowed.indexOf(g.which)>=0){return}}g.preventDefault()},"keyup.spinner":function(g){c._stop(g)}});this._kbEvents=true},_isAllowedKey:function(c){return a.isControlKey(c)},_removeKeyboard:function(){if(!this._kbEvents){return}this.element.unbind("keydown.spinner").unbind("keyup.spinner");this._kbEvents=false},_setupMouseWheel:function(){var c=this,d=this.options.mousewheel;if(this._mwEvents||!d){return}this.element.bind("mousewheel.spinner",function(f,e){if(!e||c.options.disabled||c.options.readonly){return}if(!c._start(f)){return}f.preventDefault();c._spin(c._getAmount(d,f.ctrlKey,f.shiftKey),e<0,false,f);clearTimeout(c._timer);c._timer=setTimeout(function(){if(c._isSpinning){c._stop(f)}},100)});this._mwEvents=true},_removeMouseWheel:function(){if(!this._mwEvents){return}this.element.unbind("mousewheel.spinner");this._mwEvents=false},_getAmount:function(d,c,e){if(!d||typeof d!=="object"){if(c){return this._getHalfStep()}if(e){return this._getPage()}return this._getStep()}if(c){return d.ctrlAction?this._actionAmount(d.ctrlAction):this._getHalfStep()}if(e){return d.shiftAction?this._actionAmount(d.shiftAction):this._getPage()}return d.defaultAction?this._actionAmount(d.defaultAction):this._getStep()},_actionAmount:function(c){if(c==="halfStep"){return this._getHalfStep()}if(c==="page"){return this._getPage()}return this._getStep()},_getStep:function(){return this.options.step||1},_getHalfStep:function(){return this.options.halfStep||this._getStep()},_getPage:function(){return this.options.page||this._getStep()},_parse:function(d){if(a.isFunction(this.options.parse)){return this.options.parse.apply(this,[d])}try{return this._defaultParse(d)}catch(c){throw"SpinnerException: Unable to parse the value specified without a custom parser (parse option). Reason: "+c}},_defaultParse:function(c){if(typeof c==="number"){return c}return parseFloat(c)||0},_format:function(d){if(d===undefined||d===null||d===false){return""}if(a.isFunction(this.options.format)){return this.options.format.apply(this,[d])}try{return this._defaultFormat(d)}catch(c){throw"SpinnerException: Unable to convert value to a string without a custom converter (format option). Reason: "+c}},_defaultFormat:function(c){return c.toString()},_compare:function(d,f){if(a.isFunction(this.options.compare)){return this.options.compare.apply(this,[d,f])}try{return this._defaultCompare(d,f)}catch(c){throw"SpinnerExpcetion: Unable to compare the value type without a custom converter (compare option)."}},_defaultCompare:function(c,d){if(c===null||c===undefined){c=this._emptyVal()||0}if(d===null||d===undefined){d=this._emptyVal()||0}if(c===d||c==d){return 0}if(c<d){return -1}return 1},_isEmptyVal:function(d){var c=this._emptyVal();if(c===false){return false}return this._compare(c,d===undefined?this.value():d)===0},_emptyVal:function(){var c=this.options.empty;if(c===false||c===undefined){return false}if(a.isFunction(c)){return c.apply(this)}this.options.empty=c=this._parse(c);return c},_minVal:function(){var c=this.options.min;if(c===false||c===undefined){return false}if(a.isFunction(c)){return c.apply(this)}this.options.min=c=this._parse(c);return c},_maxVal:function(){var c=this.options.max;if(c===false||c===undefined){return false}if(a.isFunction(c)){return c.apply(this)}this.options.max=c=this._parse(c);return c},_checkMinMax:function(f,c){var e=this._minVal(),d=this._maxVal();if(e!==false&&this._compare(f,e)<0){if(this._compare(c,e)===0){return false}return e}else{if(d!==false&&this._compare(f,d)>0){if(this._compare(c,d)===0){return false}return d}}return f},_setValue:function(h,f,e){if(!e){h=this._checkMinMax(h,this.value());if(h===false){return}}var d=this._isEmptyVal(h),c=this._format(h),g=f&&c!==this.element.val();this.element.val(d?"":c).attr("aria-valuenow",h);if(g){this._trigger("change")}},_adjustValue:function(d,c,f,h,g){if(this.options.disabled||!c){return false}var e=this.value(),i=this._checkMinMax(a.isFunction(c)?c.call(this,[e,d,f]):this._defaultValueCalc(e,c,d,f),e);if(i===false){if(this._isSpinning){this._stop(g)}return false}if(this._isSpinning&&this._trigger("spin",g,{value:i})===false){return false}this._setValue(i,h,true);return true},_defaultValueCalc:function(h,c,d,f){try{if(f){return h-(c*d)}return h+(c*d)}catch(g){throw"SpinnerException: Unable to increment/decrement the value without a custom stepper (step, halfStep, and page options)."}},_increment:function(d){var c=this.options.incremental;if(c){return a.isFunction(c)?c.apply(this,[d]):this._defaultIncrement(d)}return 1},_defaultIncrement:function(c){return Math.floor(c*c*c/50000-c*c/500+17*c/200+1)},_start:function(c){if(!this._isSpinning&&this._trigger("start",c)===false){return false}if(!this._spinCount){this._spinCount=1}this._isSpinning=true;return true},_spin:function(c,d,f,e){if(!this._spinCount){this._spinCount=1}if(!this._adjustValue(this._increment(this._spinCount),c,d,false,e)){this._stop(e);return}this._spinCount++;if(f){this._repeat(c,d,e)}},_repeat:function(e,f,h){var g=this.options.delay;if(typeof g!=="number"||g<=0){g=500}var c=this;this._timeout=setTimeout(d,g);function d(){clearTimeout(c._timeout);c._timeout=null;c._spin(e,f,false,h);c._interval=setInterval(function(){c._spin(e,f,false,h)},40)}},_stop:function(c){clearTimeout(this._timeout);clearInterval(this._interval);this._timeout=null;this._interval=null;this._spinCount=0;if(this._isSpinning){this._isSpinning=false;this._trigger("stop",c)}},_setOption:function(e,m){var h=this.options,c=this.element,l=this.uiSpinner,j,k,i;switch(e){case"disabled":h.disabled=m;c._prop("disabled",m).parent()[m?"addClass":"removeClass"]("ui-spinner-disabled ui-state-disabled").attr("aria-disabled",m);if(h.buttons){l.children(".ui-spinner-button").button(m?"disable":"enable")}break;case"readonly":h.readonly=m;c._prop("readonly",m).parent()[m?"addClass":"removeClass"]("ui-spinner-readonly");if(h.buttons){l.children(".ui-spinner-button").button(m?"disable":"enable")}break;case"keyboard":h.keyboard=m;this._removeKeyboard();this._setupKeyboard();break;case"mousewheel":h.mousewheel=m;this._removeMouseWheel();this._setupMouseWheel();break;case"buttons":h.buttons=m;this._removeButtons();this._setupButtons();break;case"format":h.format=m;this._setValue(this.value(),false,true);break;case"min":h.min=m;var g=this._minVal();if(g!==false&&this._compare(this.value(),g)<0){this._setValue(g,true,true)}break;case"max":h.max=m;var f=this._maxVal();if(f!==false&&this._compare(this.value(),f)>0){this._setValue(f,true,true)}break;case"empty":if(m===false||m===undefined){var d=this._emptyVal();h.empty=false;if(!c.val()&&d!==false){this._setValue(d,false,true)}}else{h.empty=m;if(this._isEmptyVal(this.value())){c.val("")}}break;default:a.Widget.prototype._setOption.call(this,e,m);break}return this},value:function(d){var c=this.options;if(d===undefined){d=this.element.val();if(d){return this._parse(d)}if(c.empty!==undefined&&c.empty!==false){this._cloneValue(c.empty)}return null}if(!c.disabled){this._setValue(this._parse(d),true,false)}return this},_cloneValue:function(c){if(typeof c!=="object"){return c}if(c instanceof Date){return new Date(c.getTime())}return a.extend(true,{},c)},stepUp:function(c){this._adjustValue(c||1,this._getStep(),false,true,null);return this},stepDown:function(c){this._adjustValue(c||1,this._getStep(),true,true,null);return this},halfStepUp:function(c){this._adjustValue(c||1,this._getHalfStep(),false,true,null);return this},halfStepDown:function(c){this._adjustValue(c||1,this._getHalfStep(),true,true,null);return this},pageUp:function(c){this._adjustValue(c||1,this._getPage(),false,true,null);return this},pageDown:function(c){this._adjustValue(c||1,this._getPage(),true,true,null);return this},spinStart:function(e,d){if(this._isSpinning){this._stop(null)}if(!this._start(null)){return}if(e===true){d=true;e=0}var c=this;this._spin(this._getStep(),d,false,null);this._interval=setInterval(function(){c._spin(c._getStep(),d,false,null)},40);if(e){setTimeout(function(){c._stop(null)},e)}},spinStop:function(){this._stop(null)},select:function(){if(!this.options.disabled){this.element.select()}return this},readonly:function(){this._setOption("readonly",true);return this},editable:function(){this._setOption("readonly",false);return this},widget:function(){return this.uiSpinner}});a.fn._prop=function(c,d){if(this.prop){return d===undefined?this.prop(c):this.prop(c,d)}if(d===false){return this.removeAttr(c)}return d===undefined?this.attr(c):this.attr(c,d===true?c:d)};a.isControlKey=function(c){return(c<=47&&c!=32)||(c>=91&&c<=95)||(c>=112&&[186,187,188,189,190,191,192,219,220,221,222].indexOf(c)===-1)}})(jQuery);
/*
* jqAmp UI Spinner v1.0 (for jQuery/jQuery UI) - Numeric extension
*
* Copyright 2012, Tony Kramer
* Dual licensed under the MIT or GPL Version 2 licenses.
* https://github.com/flamewave/jqamp-ui-spinner/raw/master/GPL-LICENSE.txt
* https://github.com/flamewave/jqamp-ui-spinner/raw/master/MIT-LICENSE.txt
*/
(function(a){a.widget("jqAmpUI.numeric",a.jqAmpUI.spinner,{version:"1.0",options:{culture:null,radix:10},_isAllowedKey:function(b){if(event.ctrlKey&&[65,67,86,88,89,90].indexOf(b)!==-1){return true}if(b===109||b===110||(b>=48&&b<=57)||(b>=96&&b<=105)){return true}if(!event.shift&&(b===189||b===190)){return true}return a.isControlKey(b)},_parse:function(c){if(typeof c==="number"){return c}try{return Globalize.parseFloat(c,this.options.radix,this.options.culture)||0}catch(b){throw"SpinnerException: Unable to parse the value specified without a custom parser (parse option). Reason: "+b}},_format:function(c){if(c===undefined||c===null||c===false){return""}try{if(typeof c!=="number"){c=Globalize.parseFloat(c,this.options.radix,this.options.culture)||0}if(!c&&c!==0){c=0}return Globalize.format(c,this.options.format,this.options.culture)||""}catch(b){throw"SpinnerException: Unable to convert value to a string without a custom converter (format option). Reason: "+b}},_cloneValue:function(b){if(typeof b!=="number"){return Globalize.parseFloat(b,this.options.radix,this.options.culture)||0}return b}})})(jQuery);